# Поисковый движок для корпоративного портала "AйТиБокс"*

Этот проект представляет собой ЛОКАЛЬНЫЙ ПОИСКОВЫЙ ДВИЖОК, разработанный для поиска по набору текстовых документов. Он имитирует работу поисковых систем, таких как Google или Яндекс, но в упрощённом виде и полностью автономно — без подключения к интернету.

Движок индексирует документы, обрабатывает поисковые запросы и возвращает ОТСОРТИРОВАННЫЕ ПО РЕЛЕВАНТНОСТИ РЕЗУЛЬТАТЫ в формате JSON.

---

## Основные возможности ##

- Чтение конфигурации и документов из файлов `config.json` и `requests.json`
- Многопоточная индексация документов
- Построение ИНВЕРТИРОВАННОГО ИНДЕКСА (inverted index)
- Поиск ТОЛЬКО ПО ТЕМ ДОКУМЕНТАМ, КОТОРЫЕ СОДЕРЖАТ СЛОВА ЗАПРОСА
- Расчёт РАСЧЕТ РЕЛЕВАНТНОСТИ каждого документа по формуле:
	
	rank = (сумма частот слов из запроса в документе) / (максимальная сумма среди всех найденных документов)

- Ограничение количества результатов на запрос через параметр `max_responses`
- Генерация файла `answers.json` с результатами поиска в строго заданном формате
- Наличие модульных тестов на основе Google Test

---

## Технологии и зависимости ##

- Язык программирования: C++17  
- Система сборки: CMake  
- IDE: CLion (рекомендуется)  
- Компилятор: GCC / MinGW (с поддержкой C++17)  
- Внешние библиотеки:  
- [nlohmann/json](https://github.com/nlohmann/json) — для работы с JSON  
- [Google Test](https://github.com/google/googletest) — для модульного тестирования  

Все зависимости подгружаются автоматически через `FetchContent` в `CMakeLists.txt`.

---

## Структура проекта ##

`
search_engine/
├── CMakeLists.txt
├── config.json
├── requests.json
├── answers.json          # генерируется автоматически
├── main.cpp              # точка входа
├── include/
│   ├── ConverterJSON.h
│   ├── InvertedIndex.h
│   └── SearchServer.h
├── src/
│   ├── ConverterJSON.cpp
│   ├── InvertedIndex.cpp
│   └── SearchServer.cpp
├── test/
│   └── test_main.cpp     # модульные тесты
└── resources/
    ├── file001.txt
    ├── file002.txt
    ├── file003.txt
    ├── file004.txt
    └── file005.txt       # документы для поиска`
---

## Как собрать и запустить ##

  a)  Откройте проект в CLion   
        Запустите CLion.
        Выберите «Open» и укажите папку с проектом (где находится CMakeLists.txt).
         

  b)  Дождитесь завершения индексации и загрузки зависимостей   
        CLion автоматически выполнит cmake и подгрузит библиотеки (nlohmann/json, GoogleTest).
        Убедитесь, что внизу вкладка «CMake» не показывает ошибок.
         

  c)  Создайте конфигурацию запуска (если не создана автоматически)   
        Нажмите на выпадающий список конфигураций (рядом с зелёной стрелкой ▶).
        Выберите search_engine (основное приложение).
        Убедитесь, что Working directory указывает на папку проекта (где лежат config.json, requests.json и папка resources).
         

  d) Запустите приложение   
        Нажмите ▶ Run (или Ctrl+R / Cmd+R).
        После выполнения в корне проекта появится файл answers.json с результатами поиска.
         
     


# Запуск из консоли Windows, после сборки (можно использовать вне CLion) #

1. Проверьте что файлы:

Файл config.json находится в корне проекта
Папка resources/ содержит документы, указанные в config.json
Файл requests.json содержит поисковые запросы

2. Запустите приложение:

../cmake-build-debug/search_engine.exe

После завершения в корне проекта появится файл answers.json с результатами.

3. Запуск всех тестов: 

../cmake-build-debug/search_engine_tests.exe

вывод результатов тестов происходит в консоль, если нужен файл с результатами тестов tests.log, то запускаем с параметром:

../cmake-build-debug/search_engine_tests.exe >tests.log


## Формат файлов ##

config.json:

    config.name — название движка  
    config.version — версия (должна быть "0.1")  
    config.max_responses — макс. число результатов на запрос (по умолчанию 5)  
    files — список путей к документам (относительно папки сборки)
     
Пример:

{
  "config": {
    "name": "SkillboxSearchEngine",
    "version": "0.1",
    "max_responses": 5
  },
  "files": [
    "../resources/file001.txt",
    "../resources/file002.txt",
    "../resources/file003.txt",
    "../resources/file004.txt",
    "../resources/file005.txt"
  ]
}

requests.json 

    requests — массив строк, каждая — поисковый запрос из 1–10 слов
     
Пример:

{
  "requests": [
    "programming languages",
    "web development frameworks",
    "database management system",
    "intelligence machine learning",
    "computer science algoritms",
    "software development testing",
    "cloud computing"
  ]
}

answers.json (генерируется):

Пример:

{
    "answers": {
        "request001": {
            "relevance": [
                {
                    "docid": 4,
                    "rank": 1.0
                },
                {
                    "docid": 0,
                    "rank": 0.6666666865348816
                },
                {
                    "docid": 3,
                    "rank": 0.3333333432674408
                }
            ],
            "result": "true"
        },
        "request002": {
            "relevance": [
                {
                    "docid": 3,
                    "rank": 1.0
                },
                {
                    "docid": 4,
                    "rank": 0.125
                }
            ],
            "result": "true"
        },
...
...
        }
    }
}

requestXXX — ID запроса (трёхзначный, с ведущими нулями)  
Если найден ровно один документ — поля docid и rank указываются напрямую  
Если найдено несколько — используется массив relevance  
Если ничего не найдено — только "result": "false"

## Важные замечания ##

Все слова в документах и запросах должны быть строчными латинскими буквами  
Слова разделены одним или несколькими пробелами  
Документы не должны превышать 1000 слов, длина слова — не более 100 символов  
Если версия в config.json не равна "0.1", программа выведет предупреждение  
Отсутствующие файлы из files пропускаются с предупреждением, но не останавливают выполнение.

## Соответствие техническому заданию ##

Проект полностью реализует требования: 

    Класс ConverterJSON для работы с JSON  
    Класс InvertedIndex с многопоточной индексацией  
    Класс SearchServer с расчётом релевантности  
    Поиск только по документам, содержащим слова запроса  
    Ограничение количества результатов через max_responses  
    Корректный формат answers.json  
    Модульные тесты проходят успешно  
    Поддержка многопоточности при индексации

Автор Туманян Евгений Эдуардович.

Разработан как учебный проект в рамках курса по C++. 

    "AйТиБокс"* — вымышленная компания для демонстрации корпоративного сценария использования.

## Лицензия ## 

Проект распространяется без лицензионных ограничений и предназначен исключительно для образовательных целей.